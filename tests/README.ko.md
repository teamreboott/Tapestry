# Tapestry ν…μ¤νΈ ν΄λΌμ΄μ–ΈνΈ & API κ°€μ΄λ“

[English](README.md) | ν•κµ­μ–΄

μ΄ λ¬Έμ„λ” Tapestry API μ—”λ“ν¬μΈνΈμ™€ μ κ³µλλ” ν…μ¤νΈ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ©λ²•μ„ μ•λ‚΄ν•©λ‹λ‹¤.

---

## π“ API λ νΌλ°μ¤

### `POST /websearch`

μ›Ή κ²€μƒ‰ κΈ°λ° QAλ¥Ό μ„ν• λ©”μΈ μ—”λ“ν¬μΈνΈμ…λ‹λ‹¤.

#### μ”μ²­ λ°”λ””

| μ΄λ¦„                    | νƒ€μ…    | μ„¤λ…                                                        | κΈ°λ³Έκ°’    | ν•„μ    |
|------------------------|---------|-------------------------------------------------------------|-----------|---------|
| `query`                | String  | κ²€μƒ‰ μΏΌλ¦¬                                                   | -         | μ      |
| `language`             | String  | κ²€μƒ‰ μ–Έμ–΄ (`ko`, `en`, `zh`, `ja`)                          | `ko`      | μ•„λ‹μ¤  |
| `search_type`          | String  | κ²€μƒ‰ νƒ€μ… (`auto`, `general`, `scholar`, `news`, `youtube`) | `auto`    | μ•„λ‹μ¤  |
| `persona_prompt`       | String  | νλ¥΄μ†λ‚ ν”„λ΅¬ν”„νΈ (`N/A` μ‚¬μ© μ‹ λ―Έμ μ©)                    | `N/A`     | μ•„λ‹μ¤  |
| `custom_prompt`        | String  | μ»¤μ¤ν…€ ν”„λ΅¬ν”„νΈ (`N/A` μ‚¬μ© μ‹ λ―Έμ μ©)                      | `N/A`     | μ•„λ‹μ¤  |
| `target_nuance`        | String  | λ©ν‘ λ‰μ•™μ¤ (`Natural` μ‚¬μ© μ‹ κΈ°λ³Έ)                        | `Natural` | μ•„λ‹μ¤  |
| `return_process`       | Boolean | ν”„λ΅μ„Έμ¤ λ©”μ‹μ§€ λ°ν™ μ—¬λ¶€                                   | `true`    | μ•„λ‹μ¤  |
| `stream`               | Boolean | μ¤νΈλ¦¬λ° μ‘λ‹µ λ°ν™ μ—¬λ¶€                                     | `true`    | μ•„λ‹μ¤  |
| `use_youtube_transcript`| Boolean| μ νλΈ νΈλμ¤ν¬λ¦½νΈ ν¬ν•¨ μ—¬λ¶€                               | `false`   | μ•„λ‹μ¤  |
| `top_k`                | Integer | μ‚¬μ©ν•  μ›Ή μ»¨ν…μΈ  μ (`auto`λ” μλ™)                         | `auto`    | μ•„λ‹μ¤  |
| `messages`             | Array   | λ©”μ‹μ§€ νμ¤ν† λ¦¬ (ν•„μ” μ—†μΌλ©΄ `[]`)                          | `[]`      | μ•„λ‹μ¤  |
| β”” `role`               | String  | μ—­ν•  (`user`, `assistant`)                                  | -         | μ*     |
| β”” `content`            | String  | λ©”μ‹μ§€ λ‚΄μ©                                                 | -         | μ*     |

\* `messages` λ°°μ—΄μ΄ μ κ³µλ κ²½μ° ν•„μ

#### μ‘λ‹µ

μ•„λμ™€ κ°™μ€ status νƒ€μ…μ JSON λΌμΈ μ¤νΈλ¦¬λ°:

- `processing`: μ²λ¦¬ μƒνƒ
- `streaming`: μ¤νΈλ¦¬λ° μ‘λ‹µ
- `complete`: μµμΆ… μ‘λ‹µ
- `failure`: μ¤λ¥ λ©”μ‹μ§€

---

## π§ ν…μ¤νΈ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ©λ²•

API ν…μ¤νΈμ© μƒν” ν΄λΌμ΄μ–ΈνΈκ°€ μ κ³µλ©λ‹λ‹¤.

### ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰

```bash
python client.py --query "AI κ²€μƒ‰ μ—”μ§„μ΄λ€?" --language ko
```

#### μ£Όμ” μµμ…

- `--query`: (ν•„μ) κ²€μƒ‰ μΏΌλ¦¬
- `--language`: κ²€μƒ‰ μ–Έμ–΄ (`en`, `ko` λ“±)
- κΈ°νƒ€ μµμ…μ€ `python client.py --help` μ°Έκ³ 

#### μ—”λ“ν¬μΈνΈ μ„¤μ •

`client.py`μ `SERVER_URL`μ„ ν™κ²½μ— λ§κ² μμ •ν•μ„Έμ”.

- Docker/λ΅μ»¬: `http://127.0.0.1:9012/websearch`
- Kubernetes: `http://127.0.0.1:30800/websearch`

---

## π©Ί ν—¬μ¤ μ²΄ν¬

`GET /health`

```bash
curl http://127.0.0.1:9012/health
```

---

## π“ νμΌ

- `client.py` : API ν…μ¤νΈμ© λΉ„λ™κΈ° ν΄λΌμ΄μ–ΈνΈ μμ 
- `README.md` : (μλ¬Έ)
- `README.ko.md` : (μ΄ νμΌ)

--- 